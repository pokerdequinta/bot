<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot - Poker de Quinta</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a1f0a 0%, #1a3d1a 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 15px 20px;
            text-align: center;
            border-bottom: 3px solid #FFD700;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .logo-container img {
            height: 100px;
            width: auto;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.6));
        }

        .header h1 {
            color: #FFD700;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 5px;
        }

        .header p {
            color: #b8b8b8;
            font-size: 1em;
        }

        .suits {
            font-size: 1.3em;
            margin-top: 8px;
        }

        .suits span {
            margin: 0 8px;
        }

        .spade { color: #000; text-shadow: 0 0 5px #fff; }
        .heart { color: #e74c3c; text-shadow: 0 0 5px #fff; }
        .diamond { color: #e74c3c; text-shadow: 0 0 5px #fff; }
        .club { color: #000; text-shadow: 0 0 5px #fff; }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1000px;
            width: 100%;
            margin: 20px auto;
            background: rgba(26, 61, 26, 0.3);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 650px;
        }

        .message {
            display: flex;
            gap: 10px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4);
        }

        .message-content {
            max-width: 75%;
            padding: 15px 20px;
            border-radius: 15px;
            line-height: 1.6;
            word-wrap: break-word;
        }

        .message.bot .message-content {
            background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-top-left-radius: 5px;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #1a5a1a, #0f3d0f);
            border: 2px solid rgba(46, 204, 113, 0.3);
            border-top-right-radius: 5px;
        }

        .typing-indicator {
            display: none;
            padding: 10px 15px;
            background: rgba(45, 45, 45, 0.8);
            border-radius: 20px;
            width: fit-content;
        }

        .typing-indicator.active {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #FFD700;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .input-container {
            display: flex;
            padding: 20px;
            gap: 10px;
            background: rgba(26, 26, 26, 0.8);
            border-top: 2px solid rgba(255, 215, 0, 0.3);
        }

        #userInput {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 25px;
            background: rgba(45, 45, 45, 0.6);
            color: #fff;
            font-size: 1em;
            outline: none;
            transition: all 0.3s;
        }

        #userInput:focus {
            border-color: #FFD700;
            background: rgba(45, 45, 45, 0.9);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        #sendBtn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #1a1a1a;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        #sendBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
        }

        #sendBtn:active {
            transform: translateY(0);
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(26, 26, 26, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 0.85em;
        }

        table th, table td {
            padding: 6px 8px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        table th {
            background: rgba(255, 215, 0, 0.1);
            color: #FFD700;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .logo-container img {
                height: 60px;
            }
            .header h1 {
                font-size: 1.5em;
            }
            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <img src="logo pdq.png" alt="Poker de Quinta" onerror="this.style.display='none'">
        </div>
        <h1>ğŸ° Chatbot - Poker de Quinta ğŸ°</h1>
        <p>O bot mais completo, agressivo e sincero!</p>
        <div class="suits">
            <span class="spade">â™ </span>
            <span class="heart">â™¥</span>
            <span class="diamond">â™¦</span>
            <span class="club">â™£</span>
        </div>
    </div>

    <div class="chat-container">
        <div class="messages" id="messages">
            <div class="message bot">
                <div class="message-avatar">ğŸ°</div>
                <div class="message-content">
                    E AÃ, BARALHÃƒO! ğŸ˜¤<br><br>
                    Chegou o bot OFICIAL mais COMPLETO do Poker de Quinta!<br><br>
                    Tenho TODO O RANKING 2026 decorado!<br>
                    Pergunta QUALQUER COISA sobre ranking, valores, regras, datas, janta, KO, roleta, tudo!<br><br>
                    <strong>MAS SE VIER COM PREGUIÃ‡A, VOU MANDAR TU LER O REGULAMENTO! ğŸ“–ğŸ’¥</strong><br><br>
                    <strong>BORA, PERGUNTA AÃ!</strong> ğŸ”¥
                </div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>

        <div class="input-container">
            <input type="text" id="userInput" placeholder="Pergunta aÃ­, nÃ£o tenho dia todo nÃ£o... ğŸ˜¤" />
            <button id="sendBtn">Mandar ğŸ¯</button>
        </div>
    </div>

    <script>
        async function fetchRanking() {
            try {
                const response = await fetch('https://pokerdequinta.github.io/ranking');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // Extrai a tabela de ranking geral
                const rankingTable = doc.querySelector('table');
                if (!rankingTable) {
                    console.error('Tabela de ranking nÃ£o encontrada');
                    return null;
                }

                const rankingData = [];
                const rows = rankingTable.querySelectorAll('tr');

                rows.forEach((row, index) => {
                    if (index === 0) return; // Pula o header

                    const cols = row.querySelectorAll('td');
                    if (cols.length < 2) return;

                    const pos = cols[0].textContent.trim();
                    const nome = cols[1].textContent.trim();
                    const pontos = cols[2].textContent.trim();

                    rankingData.push({ pos, nome, pontos });
                });

                return rankingData;
            } catch (error) {
                console.error('Erro ao carregar ranking:', error);
                return null;
            }
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const msg = input.value.trim();

            if (!msg) return;

            addMessage(msg, 'user');
            input.value = '';
            showTyping();

            const rankingData = await fetchRanking();

            setTimeout(() => {
                hideTyping();
                addMessage(generateResponse(msg.toLowerCase(), rankingData), 'bot');
            }, 800 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-avatar">${sender === 'bot' ? 'ğŸ°' : 'ğŸ‘¤'}</div>
                <div class="message-content">${text}</div>
            `;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showTyping() {
            document.getElementById('typingIndicator').classList.add('active');
        }

        function hideTyping() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        function generateResponse(msg, rankingData) {
            if (msg.includes('posicao') || msg.includes('posiÃ§Ã£o') || msg.includes('colocacao')) {
                const nome = msg.replace(/posicao|posiÃ§Ã£o|colocacao|colocaÃ§Ã£o|do|da|de|fulano/gi, '').trim();
                if (rankingData) {
                    const jogador = rankingData.find(j => j.nome.toLowerCase().includes(nome.toLowerCase()));
                    if (jogador) {
                        return `ğŸ“Š <strong>POSIÃ‡ÃƒO DE ${jogador.nome.toUpperCase()}</strong><br><br>
                                ğŸ† <strong>${jogador.pos}Âº LUGAR</strong><br>
                                ğŸ’¯ Pontos: ${jogador.pontos}<br><br>
                                ${jogador.pos === '1' ? 'ğŸ‘‘ <strong>REI DA MESA!</strong><br>' : ''}
                                Ranking completo: <a href="https://pokerdequinta.github.io/ranking" style="color: #FFD700;">pokerdequinta.github.io/ranking</a>`;
                    }
                    return `ğŸ¤” <strong>NÃƒO ENCONTREI ${nome.toUpperCase()} NO RANKING!</strong><br><br>
                            ğŸš« Pode ser que o nome esteja errado ou ele nÃ£o esteja no ranking ainda.<br><br>
                            ğŸ“Š Ranking completo: <a href="https://pokerdequinta.github.io/ranking" style="color: #FFD700;">pokerdequinta.github.io/ranking</a><br><br>
                            <strong>VERIFICA LÃ, BARALHÃƒO! ğŸ‘€</strong>`;
                }
                return `ğŸ”„ <strong>ESTOU CARREGANDO O RANKING...</strong><br><br>
                        ğŸ”œ Tenta de novo em alguns segundos! â±ï¸`;
            }

            // Outras perguntas...
            const respostas = {
                'ranking': `ğŸ† <strong>RANKING GERAL</strong><br><br>
                            ${rankingData ? 
                                `<table>
                                    <tr><th>Pos</th><th>Nome</th><th>Pontos</th></tr>
                                    ${rankingData.map(j => `<tr><td>${j.pos}Âº</td><td>${j.nome}</td><td>${j.pontos}</td></tr>`).join('')}
                                </table>` : 
                                'ğŸ”„ Carregando ranking...'
                            }<br><br>
                            ğŸ”— <a href="https://pokerdequinta.github.io/ranking" style="color: #FFD700;">Ver ranking completo</a>`,
                'proxima etapa': `ğŸ—“ï¸ <strong>PRÃ“XIMA ETAPA</strong><br><br>
                                  ğŸ“… 2Âª Etapa: 26/02/2026<br>
                                  â° 20:00h<br>
                                  ğŸ“ Luck BAR<br><br>
                                  ğŸ’° Buy-in: R$ 100<br>
                                  ğŸ”„ Rebuy: R$ 30<br>
                                  â• Add-on: R$ 50<br><br>
                                  ğŸ‘‘ Rei da Mesa: Sergio<br><br>
                                  <strong>BORA SE INSCREVER! ğŸ”¥</strong>`,
                'valores': `ğŸ’° <strong>VALORES</strong><br><br>
                            ğŸ² Buy-in: R$ 100 = 15K fichas<br>
                            ğŸ”„ Rebuy: R$ 30 = 15K fichas<br>
                            ğŸ”„ğŸ”„ Rebuy Duplo: R$ 60 = 30K fichas<br>
                            â• Add-on: R$ 50 = 50K fichas<br><br>
                            âš¡ BÃ´nus: 3K fichas (antes 20h)<br><br>
                            ğŸš« SÃ³ PIX! Sem dinheiro! ğŸ’³`,
                'ko': `ğŸ’¥ <strong>SISTEMA KO</strong><br><br>
                        âœ… 1 ficha KO no stack<br>
                        âœ… Conta SÃ“ APÃ“S INTERVALO<br>
                        âœ… Cada ficha = +1 ponto<br>
                        âœ… Rei = 2 fichas!<br><br>
                        ğŸ’° Matador KO = R$ 200!<br><br>
                        ğŸ¥Š LÃ­der: Amarildo (5 eliminaÃ§Ãµes)<br><br>
                        <strong>VIRA O TERROR! ğŸ˜ˆ</strong>`,
                'rei': `ğŸ‘‘ <strong>REI DA MESA</strong><br><br>
                        ğŸ‘‘ Sergio (31 pontos)<br><br>
                        ğŸ’° 2 FICHAS KO na cabeÃ§a<br>
                        ğŸ’¥ CabeÃ§a vale DOBRO!<br>
                        ğŸ”¥ Eliminar = 2 pontos!<br><br>
                        <strong>CAÃ‡A O REI! ğŸ¯</strong>`,
                'roleta': `ğŸ¡ <strong>ROLETA DA SORTE</strong><br><br>
                            â° AtÃ© o intervalo!<br><br>
                            <strong>ÃšLTIMA:</strong><br>
                            Cleversson ganhou 1 AbraÃ§o do Bruxo!<br><br>
                            <strong>BOA SORTE! ğŸ°</strong>`,
                'janta': `ğŸ½ï¸ <strong>JANTA</strong><br><br>
                            ğŸ’° R$ 30 (OBRIGATÃ“RIO)<br>
                            ğŸ‘¨â€ğŸ³ Chef especial<br><br>
                            <strong>Ãšltima:</strong><br>
                            Feijoada completa<br><br>
                            <strong>NÃƒO COME? PAGA IGUAL! ğŸ˜¤</strong>`,
                'regulamento': `ğŸ“‹ <strong>REGULAMENTO</strong><br><br>
                                ğŸ”— <a href="https://pokerdequinta.github.io/site" style="color: #FFD700;">LÃª o regulamento completo</a><br><br>
                                <strong>PARA DE SER PREGUIÃ‡OSO! ğŸ˜¤</strong>`
            };

            return respostas[msg] || `ğŸ¤” <strong>NÃƒO ENTENDI!</strong><br><br>Reformula ou <a href="https://pokerdequinta.github.io/site" style="color: #FFD700;">lÃª o regulamento</a>`;
        }

        // Event Listeners
        document.getElementById('sendBtn').addEventListener('click', sendMessage);

        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
