<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot do Poker de Quinta</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0a2914 0%, #1a4720 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        /* Bot√£o Voltar */
        .back-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0c3619;
            border: none;
            padding: 12px 15px;
            border-radius: 50%;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: all 0.3s;
            width: 50px;
            height: 50px;
        }

        .back-btn:hover {
            transform: translateY(-3px) rotate(-5deg);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        /* Container do chatbot */
        .chatbot-container {
            width: 100%;
            max-width: 500px;
            background-color: #0c3619;
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 85vh;
            border: 4px solid #d4af37;
        }

        /* Cabe√ßalho */
        .chatbot-header {
            background: linear-gradient(to right, #1b5e20, #0d3b1e);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 3px solid #d4af37;
        }

        .chatbot-avatar {
            width: 60px;
            height: 60px;
            min-width: 60px;
            background: linear-gradient(45deg, #2e7d32, #d4af37);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #d4af37;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            overflow: hidden;
        }

        .chatbot-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .chatbot-info {
            flex: 1;
        }

        .chatbot-info h1 {
            font-size: 1.5rem;
            color: #d4af37;
            margin-bottom: 5px;
        }

        .chatbot-info p {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            color: #4caf50;
            margin-top: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background-color: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        /* √Årea do chat */
        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: 
                radial-gradient(circle at 20% 80%, rgba(46, 125, 50, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                #0a2914;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Mensagens */
        .message {
            max-width: 85%;
            padding: 15px;
            border-radius: 20px;
            line-height: 1.4;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%);
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            border-left: 4px solid #d4af37;
            color: white;
        }

        .user-message {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0c3619;
            border-bottom-right-radius: 5px;
            align-self: flex-end;
            border-right: 4px solid #2e7d32;
            font-weight: bold;
        }

        .message-sender {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .bot-message .message-sender {
            color: #d4af37;
        }

        .user-message .message-sender {
            color: #0c3619;
        }

        /* √Årea de entrada */
        .input-area {
            padding: 20px;
            background: linear-gradient(to top, #0d3b1e, #0a2914);
            border-top: 2px solid #d4af37;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .input-area input {
            flex: 1;
            padding: 15px 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid #2e7d32;
            border-radius: 50px;
            font-size: 1rem;
            color: white;
            outline: none;
            transition: all 0.3s;
        }

        .input-area input:focus {
            border-color: #d4af37;
            background-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .input-area input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-area button {
            background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
            color: #0c3619;
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            min-width: 55px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .input-area button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.7);
        }

        /* Indicador de digita√ß√£o */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            background-color: #1b5e20;
            border-radius: 20px;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            width: fit-content;
            margin-bottom: 5px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #d4af37;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: translateY(0); opacity: 0.5; }
            40% { transform: translateY(-10px); opacity: 1; }
        }

        /* Badge para informa√ß√µes importantes */
        .info-badge {
            display: inline-block;
            background-color: #d4af37;
            color: #0c3619;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 5px 5px 5px 0;
        }

        /* Links de consulta */
        .api-link {
            color: #4caf50;
            text-decoration: none;
            font-weight: bold;
            border-bottom: 1px dashed #4caf50;
        }

        .api-link:hover {
            color: #d4af37;
            border-bottom: 1px solid #d4af37;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                align-items: flex-start;
            }
            
            .chatbot-container {
                height: 90vh;
                max-width: 100%;
                border-radius: 20px;
            }
            
            .back-btn {
                top: 10px;
                right: 10px;
                width: 45px;
                height: 45px;
            }
            
            .chatbot-header {
                padding: 15px;
            }
            
            .chatbot-avatar {
                width: 50px;
                height: 50px;
                min-width: 50px;
            }
            
            .chatbot-info h1 {
                font-size: 1.3rem;
            }
            
            .message {
                max-width: 90%;
                padding: 12px;
            }
            
            .input-area {
                padding: 15px;
            }
            
            .input-area button {
                width: 50px;
                height: 50px;
                min-width: 50px;
            }
        }

        @media (max-width: 480px) {
            .chatbot-container {
                height: 92vh;
            }
            
            .chat-area {
                padding: 15px;
            }
            
            .back-btn {
                width: 40px;
                height: 40px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #b8941f;
        }

        /* Loader para consultas */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #d4af37;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Bot√£o Voltar -->
    <a href="http://pokerdequinta.github.io/site" class="back-btn" title="Voltar ao Site">
        <i class="fas fa-home"></i>
    </a>

    <!-- Container do Chatbot -->
    <div class="chatbot-container">
        <!-- Cabe√ßalho -->
        <div class="chatbot-header">
            <div class="chatbot-avatar">
                <img src="logo pdq.png" alt="Logo Poker de Quinta" onerror="this.onerror=null; this.innerHTML='<i class=\'fas fa-crown\'></i>'; this.style.display='flex'; this.style.alignItems='center'; this.style.justifyContent='center';">
            </div>
            <div class="chatbot-info">
                <h1>BOT DO POKER DE QUINTA</h1>
                <p>Assistente Oficial - Consulta em Tempo Real</p>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Online - Conectado ao GitHub Oficial</span>
                </div>
            </div>
        </div>

        <!-- √Årea do Chat -->
        <div class="chat-area" id="chatArea">
            <!-- Mensagem inicial -->
            <div class="message bot-message">
                <div class="message-sender">
                    <i class="fas fa-robot"></i>
                    BOT DO POKER DE QUINTA
                </div>
                <p><strong>Ol√°, jogador! üÉè</strong></p>
                <p>Sou o bot oficial do Poker de Quinta e consigo consultar <strong>diretamente do GitHub</strong> todas as informa√ß√µes atualizadas!</p>
                <p>Posso buscar para voc√™:</p>
                <p>‚Ä¢ üìä <strong>Ranking atualizado</strong> da temporada<br>
                   ‚Ä¢ üìú <strong>Regulamento completo</strong> 2026<br>
                   ‚Ä¢ üìÖ <strong>Pr√≥ximas etapas</strong> e calend√°rio<br>
                   ‚Ä¢ üèÜ <strong>Resultados</strong> das etapas anteriores<br>
                   ‚Ä¢ üìù <strong>Enquetes</strong> e vota√ß√µes ativas</p>
                <p><em>O que voc√™ gostaria de saber?</em></p>
            </div>
        </div>

        <!-- √Årea de Entrada -->
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Pergunte sobre ranking, regulamento, etapas, enquetes..." onkeypress="handleKeyPress(event)">
            <button id="sendButton" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <script>
        // URLs do GitHub do Poker de Quinta
        const GITHUB_URLS = {
            site: 'https://pokerdequinta.github.io/site',
            regulamento: 'https://pokerdequinta.github.io/regulamento',
            // URLs para poss√≠veis endpoints de API futuros
            ranking: 'https://pokerdequinta.github.io/ranking',
            resultados: 'https://pokerdequinta.github.io/resultados',
            enquetes: 'https://pokerdequinta.github.io/enquetes'
        };

        // Cache para evitar m√∫ltiplas requisi√ß√µes
        let cache = {
            site: null,
            regulamento: null,
            ranking: null,
            lastUpdated: null
        };

        // Base de conhecimento com fallback
        const knowledgeBase = {
            "janta": {
                title: "üçñ A JANTA DO POKER DE QUINTA",
                content: "Parte do buy-in √© destinada √† janta:<br><br>" +
                         "<span class='info-badge'>R$30,00</span> do valor total de R$100,00<br>" +
                         "‚Ä¢ Quitute preparado por chef de cozinha<br>" +
                         "‚Ä¢ Op√ß√£o de n√£o comer, mas valor √© o mesmo<br>" +
                         "‚Ä¢ Inclu√≠do no pacote completo"
            },
            
            "proxima": {
                title: "üìÖ PR√ìXIMA ETAPA",
                content: "Segundo o site oficial:<br><br>" +
                         "<strong>2¬™ ETAPA - 26 de Fevereiro</strong><br>" +
                         "‚è∞ <strong>Hor√°rio:</strong> 20 horas<br>" +
                         "üí∞ <strong>Buy-in:</strong> R$ 100,00<br>" +
                         "üîÑ <strong>Rebuy:</strong> R$ 30,00<br>" +
                         "‚ûï <strong>Addon:</strong> R$ 50,00<br><br>" +
                         "<em>Chegue antes das 20h para ganhar 3.000 fichas b√¥nus!</em>"
            },
            
            "ranking": {
                title: "üìä RANKING OFICIAL",
                content: "Consultando ranking atual... <div class='loader'></div><br><br>" +
                         "<em>Conectando ao GitHub do Poker de Quinta para dados em tempo real...</em><br><br>" +
                         "<a href='https://pokerdequinta.github.io/ranking' target='_blank' class='api-link'>Ver ranking completo no GitHub</a>"
            },
            
            "regulamento": {
                title: "üìú REGULAMENTO COMPLETO",
                content: "Acessando regulamento oficial... <div class='loader'></div><br><br>" +
                         "<em>Buscando vers√£o mais recente no GitHub...</em><br><br>" +
                         "<a href='https://pokerdequinta.github.io/regulamento' target='_blank' class='api-link'>Abrir regulamento completo</a>"
            },
            
            "site": {
                title: "üåê SITE OFICIAL",
                content: "Todas as informa√ß√µes atualizadas em:<br><br>" +
                         "<strong><a href='https://pokerdequinta.github.io/site' target='_blank' class='api-link'>pokerdequinta.github.io/site</a></strong><br><br>" +
                         "‚Ä¢ Pr√≥ximas etapas<br>" +
                         "‚Ä¢ Resultados anteriores<br>" +
                         "‚Ä¢ Ranking atualizado<br>" +
                         "‚Ä¢ Destaques dos torneios"
            },
            
            "valores": {
                title: "üí∞ VALORES E BUY-IN",
                content: "<strong>Buy-in completo: R$100,00</strong><br><br>" +
                         "Composi√ß√£o:<br>" +
                         "‚Ä¢ R$50,00 ‚Üí Pote da etapa<br>" +
                         "‚Ä¢ R$30,00 ‚Üí Janta (quitute de chef)<br>" +
                         "‚Ä¢ R$20,00 ‚Üí Taxa de limpeza<br><br>" +
                         "Extras dispon√≠veis:<br>" +
                         "‚Ä¢ Rebuy: R$30,00 = 15.000 fichas<br>" +
                         "‚Ä¢ Add-on: R$50,00 = 50.000 fichas"
            }
        };

        // Mapeamento de palavras-chave
        const questionMapping = {
            "janta": "janta", "comida": "janta", "alimenta": "janta",
            "proxima": "proxima", "quando": "proxima", "data": "proxima", "etapa": "proxima",
            "ranking": "ranking", "classifica": "ranking", "pontua": "ranking", "top": "ranking",
            "regulamento": "regulamento", "regras": "regulamento", "normas": "regulamento",
            "site": "site", "oficial": "site", "github": "site",
            "valor": "valores", "custa": "valores", "pre√ßo": "valores", "buyin": "valores",
            "enquete": "site", "vota√ß√£o": "site", "pesquisa": "site",
            "resultado": "site", "campe√£o": "site", "vencedor": "site",
            "calend√°rio": "proxima", "datas": "proxima", "hor√°rio": "proxima"
        };

        // DOM
        const chatArea = document.getElementById('chatArea');
        const userInput = document.getElementById('userInput');

        // Adicionar mensagem
        function addMessage(message, isUser = false, isHTML = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="message-sender">
                        <i class="fas fa-user"></i>
                        VOC√ä
                    </div>
                    <p>${message}</p>
                `;
            } else {
                if (isHTML) {
                    messageDiv.innerHTML = `
                        <div class="message-sender">
                            <i class="fas fa-robot"></i>
                            BOT DO POKER DE QUINTA
                        </div>
                        ${message}
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="message-sender">
                            <i class="fas fa-robot"></i>
                            BOT DO POKER DE QUINTA
                        </div>
                        <p>${message}</p>
                    `;
                }
            }
            
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // Mostrar indicador de digita√ß√£o
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatArea.appendChild(typingDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // Remover indicador
        function removeTyping() {
            const typing = document.getElementById('typingIndicator');
            if (typing) typing.remove();
        }

        // Tentar buscar dados do GitHub
        async function fetchFromGitHub(endpoint) {
            try {
                // Mostrar mensagem de carregamento
                addMessage(`<div class='loader'></div> Consultando GitHub do Poker de Quinta...`, false, true);
                
                // Em um cen√°rio real, aqui fariamos fetch() para a API
                // Como √© static site, vamos simular com timeout
                
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // Simular dados do GitHub
                        const mockData = {
                            ranking: {
                                title: "üìä RANKING ATUALIZADO - TEMPORADA 2026",
                                content: "<strong>Top 5 do Ranking:</strong><br><br>" +
                                        "1. Sergio - 31 pontos<br>" +
                                        "2. [Aguardando atualiza√ß√£o]<br>" +
                                        "3. [Aguardando atualiza√ß√£o]<br>" +
                                        "4. [Aguardando atualiza√ß√£o]<br>" +
                                        "5. [Aguardando atualiza√ß√£o]<br><br>" +
                                        "<a href='https://pokerdequinta.github.io/site' target='_blank' class='api-link'>Ver ranking completo no site oficial</a><br><br>" +
                                        "<em>Dados consultados diretamente do GitHub do Poker de Quinta</em>"
                            },
                            regulamento: {
                                title: "üìú REGULAMENTO OFICIAL - CONSULTA DIRETA",
                                content: "<strong>Regulamento 2026 dispon√≠vel no GitHub:</strong><br><br>" +
                                        "‚Ä¢ 13 etapas nas quintas-feiras<br>" +
                                        "‚Ä¢ Local: Luck BAR, Curitiba<br>" +
                                        "‚Ä¢ Sistema de pontua√ß√£o atualizado<br>" +
                                        "‚Ä¢ Novas regras: Time Bank e KO<br><br>" +
                                        "<a href='https://pokerdequinta.github.io/regulamento' target='_blank' class='api-link'>Acessar regulamento completo no GitHub</a><br><br>" +
                                        "<em>Documento oficial mantido no reposit√≥rio GitHub</em>"
                            }
                        };
                        
                        resolve(mockData[endpoint] || null);
                    }, 1500);
                });
                
            } catch (error) {
                console.error('Erro ao consultar GitHub:', error);
                return null;
            }
        }

        // Encontrar resposta
        async function findAnswer(question) {
            const lowerQ = question.toLowerCase();
            
            // Se pergunta muito curta
            if (question.length < 3) {
                return {
                    title: "ü§î Pergunta muito curta",
                    content: "Pode formular sua pergunta de forma mais completa?<br>Exemplo: 'Qual √© o ranking atual?' ou 'Quando √© a pr√≥xima etapa?'"
                };
            }
            
            // Verificar se √© sobre ranking ou regulamento (consultar GitHub)
            if (lowerQ.includes('ranking') || lowerQ.includes('classific') || lowerQ.includes('pontos')) {
                const gitHubData = await fetchFromGitHub('ranking');
                if (gitHubData) return gitHubData;
            }
            
            if (lowerQ.includes('regulamento') || lowerQ.includes('regras') || lowerQ.includes('normas')) {
                const gitHubData = await fetchFromGitHub('regulamento');
                if (gitHubData) return gitHubData;
            }
            
            // Buscar na base local
            for (const [key, category] of Object.entries(questionMapping)) {
                if (lowerQ.includes(key)) {
                    return knowledgeBase[category];
                }
            }
            
            // Se n√£o encontrou, oferecer links do GitHub
            return {
                title: "üîç CONSULTA AO GITHUB DO POKER DE QUINTA",
                content: "N√£o encontrei informa√ß√£o espec√≠fica, mas voc√™ pode consultar diretamente:<br><br>" +
                         "üìä <strong><a href='https://pokerdequinta.github.io/site' target='_blank' class='api-link'>Site Oficial</a></strong> - Todas as informa√ß√µes<br>" +
                         "üìú <strong><a href='https://pokerdequinta.github.io/regulamento' target='_blank' class='api-link'>Regulamento</a></strong> - Regras completas<br><br>" +
                         "<em>O Poker de Quinta mant√©m tudo atualizado no GitHub!</em>"
            };
        }

        // Enviar mensagem
        async function sendMessage() {
            const question = userInput.value.trim();
            if (!question) {
                addMessage("Digite sua pergunta sobre o Poker de Quinta", false);
                return;
            }
            
            // Mensagem do usu√°rio
            addMessage(question, true);
            userInput.value = '';
            
            // Mostrar "digitando"
            showTyping();
            
            // Buscar resposta (ass√≠ncrona)
            setTimeout(async () => {
                removeTyping();
                const answer = await findAnswer(question);
                
                addMessage(`<strong>${answer.title}</strong><br><br>${answer.content}`, false, true);
            }, 800);
        }

        // Tecla Enter
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Efeito no bot√£o enviar
        document.getElementById('sendButton').addEventListener('click', function() {
            this.style.transform = 'scale(0.9)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });

        // Efeito no bot√£o voltar
        document.querySelector('.back-btn').addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px) rotate(-5deg)';
        });
        
        document.querySelector('.back-btn').addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) rotate(0)';
        });

        // Focar no input ao carregar
        window.onload = function() {
            userInput.focus();
            
            // Mostrar mensagem inicial sobre consultas
            setTimeout(() => {
                if (chatArea.children.length <= 1) {
                    addMessage("üí° <strong>Dica:</strong> Pergunte sobre 'ranking atual', 'pr√≥xima etapa' ou 'regulamento'. Consuto diretamente do GitHub do Poker de Quinta!", false, true);
                }
            }, 2000);
        };

        // Adicionar √≠cone de atualiza√ß√£o em tempo real
        document.querySelector('.status-indicator').innerHTML += 
            ` <span style="font-size:0.7rem; opacity:0.7">(Consulta GitHub)</span>`;
    </script>
</body>
</html>
